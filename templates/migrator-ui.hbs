<div>
  <header class="form-header">
    <h2>üé¥ L5R4 Migration Tool</h2>
    <p class="notes">
      <strong>System:</strong> {{systemId}} | <strong>World:</strong> {{worldName}}
    </p>
  </header>
  
  <section class="form-group">
    <div class="notification info flexrow">
      {{#if isL5R4}}
        <i class="fas fa-check-circle"></i>
        <span>Running on <strong>l5r4</strong> - Ready to export</span>
      {{else if isL5R4Enhanced}}
        <i class="fas fa-check-circle"></i>
        <span>Running on <strong>l5r4-enhanced</strong> - Ready to import</span>
      {{else}}
        <i class="fas fa-exclamation-triangle"></i>
        <span>Unsupported system: {{systemId}}</span>
      {{/if}}
    </div>
    
    {{#if hasExportData}}
    <div class="notification info flexrow">
      <i class="fas fa-database"></i>
      <span>Export data loaded</span>
    </div>
    {{/if}}
    
    {{#if hasValidation}}
    <div class="notification {{#if validationReady}}success{{else}}warning{{/if}} flexrow">
      {{#if validationReady}}
        <i class="fas fa-check-circle"></i>
        <span>Validation passed - Ready to import!</span>
      {{else}}
        <i class="fas fa-exclamation-circle"></i>
        <span>Validation found issues - Check report</span>
      {{/if}}
    </div>
    {{/if}}
    
    {{#if schemaDetection}}
    <div class="notification info">
      <h4>üìä Detected Schema</h4>
      <div class="form-fields">
        <div class="form-group">
          <label>Schema State:</label>
          <span class="tag state-{{schemaDetection.state}}">{{schemaDetection.stateLabel}}</span>
        </div>
        <div class="form-group">
          <label>Confidence:</label>
          <span class="tag confidence-{{schemaDetection.confidenceClass}}">{{schemaDetection.confidence}}%</span>
        </div>
        <div class="form-group">
          <label>Import Strategy:</label>
          <span>{{schemaDetection.strategyLabel}}</span>
        </div>
      </div>
    </div>
    {{/if}}
  </section>
  
  <section class="form-group">
    <h3 class="form-header">Migration Workflow</h3>
    
    <!-- Step 1: Backup -->
    <div class="form-group">
      <label class="step-label"><span class="step-number">1</span> Create Backup (Recommended)</label>
      <p class="notes">Create a safety backup before starting migration</p>
      <button type="button" data-action="backup">
        <i class="fas fa-save"></i>
        Create Backup
      </button>
    </div>
    
    <!-- Step 2: Export (l5r4 only) -->
    {{#if isL5R4}}
    <div class="form-group">
      <label class="step-label"><span class="step-number">2</span> Export World Data</label>
      <p class="notes">Export all actors, items, and world data from l5r4 system</p>
      <button type="button" data-action="export">
        <i class="fas fa-file-export"></i>
        Export Data
      </button>
      <p class="hint">
        <em>After export, switch to l5r4-enhanced system and upload the export file</em>
      </p>
    </div>
    {{/if}}
    
    <!-- Step 2: Upload (l5r4-enhanced only) -->
    {{#if isL5R4Enhanced}}
    <div class="form-group">
      <label class="step-label"><span class="step-number">2</span> Upload Export File</label>
      <p class="notes">Load the export file from your l5r4 world</p>
      <button type="button" data-action="uploadFile">
        <i class="fas fa-upload"></i>
        Upload Export File
      </button>
      {{#if hasExportData}}
      <p class="hint success">
        <i class="fas fa-check"></i> <em>Export data loaded</em>
      </p>
      {{/if}}
    </div>
    
    <!-- Step 3: Validate -->
    <div class="form-group">
      <label class="step-label"><span class="step-number">3</span> Validate Data</label>
      <p class="notes">Check data integrity and migration readiness</p>
      <button type="button" data-action="validate" {{#unless hasExportData}}disabled{{/unless}}>
        <i class="fas fa-check-double"></i>
        Validate Data
      </button>
      {{#if hasValidation}}
      <p class="hint {{#if validationReady}}success{{else}}warning{{/if}}">
        <i class="fas {{#if validationReady}}fa-check{{else}}fa-exclamation{{/if}}"></i>
        <em>Validation {{#if validationReady}}passed{{else}}found issues{{/if}}</em>
      </p>
      {{/if}}
    </div>
    
    <!-- Step 4: Import -->
    <div class="form-group">
      <label class="step-label"><span class="step-number">4</span> Import to l5r4-enhanced</label>
      <p class="notes">Transform and import data into current world</p>
      <button type="button" data-action="import" class="important" {{#unless hasExportData}}disabled{{/unless}}>
        <i class="fas fa-file-import"></i>
        Import Data
      </button>
      <p class="hint warning">
        <i class="fas fa-exclamation-triangle"></i>
        <em>Create a backup first! Import will add documents to this world.</em>
      </p>
    </div>
    {{/if}}
  </section>
  
  <section class="form-group">
    <h3 class="form-header">‚ÑπÔ∏è Information</h3>
    <ul class="notes">
      <li><strong>Phase 1 (l5r4):</strong> Create backup, then export data</li>
      <li><strong>Phase 2 (l5r4-enhanced):</strong> Upload export, validate, then import</li>
      <li><strong>Transformations:</strong> Converts snake_case to camelCase, bow ‚Üí weapon, adds new fields</li>
      <li><strong>Safety:</strong> Always create backups before migration operations</li>
    </ul>
  </section>
</div>
